import{i as c}from"./_virtual___federation_fn_import-Ds6aB1x0.js";import{j as n}from"./jsx-runtime-ckgASb2f.js";import{r as H}from"./__federation_shared_react-dom-CVtED8G_.js";var y={},P=H;y.createRoot=P.createRoot,y.hydrateRoot=P.hydrateRoot;const M={assessIapLogin:{url:()=>function(e,o=!1){const t=window.sessionStorage.getItem("remoteConfig");return t&&!o?Promise.resolve(JSON.parse(t)[e]):fetch(`${window.location.origin}/iwa-web/config/${window.location.hostname}/remote-config.json`).then(r=>r.json()).then(r=>(window.sessionStorage.setItem("remoteConfig",JSON.stringify(r)),r[e]))}("assessIapLogin",!0),format:"esm",from:"vite"},assessIapHome:{url:()=>function(e,o=!1){const t=window.sessionStorage.getItem("remoteConfig");return t&&!o?Promise.resolve(JSON.parse(t)[e]):fetch(`${window.location.origin}/iwa-web/config/${window.location.hostname}/remote-config.json`).then(r=>r.json()).then(r=>(window.sessionStorage.setItem("remoteConfig",JSON.stringify(r)),r[e]))}("assessIapHome"),format:"esm",from:"vite"},assessIapLib:{url:()=>function(e,o=!1){const t=window.sessionStorage.getItem("remoteConfig");return t&&!o?Promise.resolve(JSON.parse(t)[e]):fetch(`${window.location.origin}/iwa-web/config/${window.location.hostname}/remote-config.json`).then(r=>r.json()).then(r=>(window.sessionStorage.setItem("remoteConfig",JSON.stringify(r)),r[e]))}("assessIapLib"),format:"esm",from:"vite"}},R={},B=async(e,o)=>{const t=typeof e=="function"?await e():e,r=document.createElement("script");r.type="text/javascript",r.onload=o,r.src=t,document.getElementsByTagName("head")[0].appendChild(r)};function l(e,o){return J(e).then(t=>()=>o==="webpack"&&Object.prototype.toString.call(t).indexOf("Module")>-1&&t.default?t.default:t)}function N(e,o){const t=Object.assign(e,o);for(const r of Object.keys(t))typeof t[r]=="object"&&typeof o[r]=="object"&&(t[r]=N(t[r],o[r]));return t}const k=e=>N({axios:{"1.11.0":{get:()=>l(new URL("__federation_shared_axios-BVKiFqNl.js",import.meta.url).href,e),loaded:1}},cmdk:{"^1.0.0":{get:()=>l(new URL("__federation_shared_cmdk-Cgdk359h.js",import.meta.url).href,e),loaded:1}},"colorjs.io":{"^0.5.2":{get:()=>l(new URL("__federation_shared_colorjs.io-DeO9mdCj.js",import.meta.url).href,e),loaded:1}},i18next:{"23.16.8":{get:()=>l(new URL("__federation_shared_i18next-CcxIpEhL.js",import.meta.url).href,e),loaded:1}},"i18next-fetch-backend":{"6.0.0":{get:()=>l(new URL("__federation_shared_i18next-fetch-backend-DFHNXzmE.js",import.meta.url).href,e),loaded:1}},"oidc-client-ts":{"3.3.0":{get:()=>l(new URL("__federation_shared_oidc-client-ts-BiLuqC4_.js",import.meta.url).href,e),loaded:1}},react:{"18.3.1":{get:()=>l(new URL("__federation_shared_react-CNJe3lI-.js",import.meta.url).href,e),loaded:1}},"react-dom":{"18.3.1":{get:()=>l(new URL("__federation_shared_react-dom-CVtED8G_.js",import.meta.url).href,e),loaded:1}},"react-error-boundary":{"4.1.2":{get:()=>l(new URL("__federation_shared_react-error-boundary-SOT0j4eo.js",import.meta.url).href,e),loaded:1}},"react-i18next":{"14.1.3":{get:()=>l(new URL("__federation_shared_react-i18next-CIGc_zco.js",import.meta.url).href,e),loaded:1}},"react-oidc-context":{"3.3.0":{get:()=>l(new URL("__federation_shared_react-oidc-context-DjmCn3jd.js",import.meta.url).href,e),loaded:1}},"react-router-dom":{"6.30.1":{get:()=>l(new URL("__federation_shared_react-router-dom-jPW8sluu.js",import.meta.url).href,e),loaded:1}},reactflow:{"^11.11.4":{get:()=>l(new URL("__federation_shared_reactflow-D4pgNLQX.js",import.meta.url).href,e),loaded:1}},zustand:{"4.5.7":{get:()=>l(new URL("__federation_shared_zustand-ZtzXSNY1.js",import.meta.url).href,e),loaded:1}}},(globalThis.__federation_shared__||{}).default||{});async function J(e){return R[e]??=import(e),R[e]}async function W(e){const o=M[e];if(o.inited)return o.lib;if(o.format==="var")return new Promise(t=>{const r=()=>{o.inited||(o.lib=window[e],o.lib.init(k(o.from)),o.inited=!0),t(o.lib)};return B(o.url,r)});if(["esm","systemjs"].includes(o.format))return new Promise((t,r)=>{(typeof o.url=="function"?o.url:()=>Promise.resolve(o.url))().then(m=>{import(m).then(i=>{if(!o.inited){const a=k(o.from);i.init(a),o.lib=i,o.lib.init(a),o.inited=!0}t(o.lib)}).catch(r)})})}function S(e){return e?.__esModule||e?.[Symbol.toStringTag]==="Module"?e.default:e}function p(e,o){return W(e).then(t=>t.get(o).then(r=>r()))}const q=function(){const o=typeof document<"u"&&document.createElement("link").relList;return o&&o.supports&&o.supports("modulepreload")?"modulepreload":"preload"}(),z=function(e){return"/iwa-web/assess-iap-shell/"+e},E={},j=function(o,t,r){let g=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=i?.nonce||i?.getAttribute("nonce");g=Promise.allSettled(t.map(d=>{if(d=z(d),d in E)return;E[d]=!0;const f=d.endsWith(".css"),w=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${w}`))return;const s=document.createElement("link");if(s.rel=f?"stylesheet":q,f||(s.as="script"),s.crossOrigin="",s.href=d,a&&s.setAttribute("nonce",a),document.head.appendChild(s),f)return new Promise((h,C)=>{s.addEventListener("load",h),s.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${d}`)))})}))}function m(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return g.then(i=>{for(const a of i||[])a.status==="rejected"&&m(a.reason);return o().catch(m)})},{lazy:V}=await c("react"),{Route:G,Routes:Y}=await c("react-router-dom"),Q=V(()=>j(()=>import("./LazyHome-vHo8r9Bo.js"),[])),F=()=>n.jsx(Y,{children:n.jsx(G,{path:"/*",element:n.jsx(Q,{})})}),K=await p("assessIapLogin","./ProtectedRoute");let X=S(K);const{Suspense:_,lazy:L,useEffect:v,useState:Z}=await c("react"),{useTranslation:ee}=await c("react-i18next"),{Route:x,Routes:te,useNavigate:oe,useParams:ne}=await c("react-router-dom"),re=await p("assessIapLib","./HostConfigContextProvider");let{useHostConfigContext:ae}=re;const se=await p("assessIapLib","./LoadingScreen");let I=S(se);const ie=L(()=>j(()=>import("./LazyLogin-Cavk4-RN.js"),[])),ce=L(()=>j(()=>import("./LazyTnC-frl9dZIQ.js"),[])),de=L(()=>j(()=>import("./LazyPreCheck-BAOoBadW.js"),[])),le=()=>{const{i18n:e}=ee(),o=ae(),t=oe(),{langId:r}=ne(),[g,m]=Z("en");return v(()=>{const i=o.hostConfig.supportedLanguages||[],d=sessionStorage.getItem("iwapAncestorLocale")||r;if(d&&i.includes(d.toLowerCase()))m(d.toLowerCase());else{const f=window.location.pathname.replace(`/iwa-web/${r}`,"");t(`/${o.hostConfig.defaultLanguage||"en"}${f}`)}},[r]),v(()=>{e.changeLanguage(g)},[g]),n.jsxs(te,{children:[n.jsx(x,{path:"/login/*",element:n.jsx(_,{fallback:n.jsx("div",{className:"sh-container",children:n.jsx(I,{})}),children:n.jsx(ie,{})})}),n.jsx(x,{path:"/tnc/*",element:n.jsx(_,{fallback:n.jsx("div",{className:"sh-container",children:n.jsx(I,{})}),children:n.jsx(ce,{})})}),n.jsx(x,{path:"/systemCheck/:cameraCheck?/*",element:n.jsx(_,{fallback:n.jsx("div",{className:"sh-container",children:n.jsx(I,{})}),children:n.jsx(de,{})})}),n.jsx(x,{path:"/*",element:n.jsx(_,{fallback:n.jsx("div",{className:"sh-container",children:n.jsx(I,{})}),children:n.jsx(X,{children:n.jsx(F,{})})})})]})},O=await c("i18next"),{initReactI18next:ue}=await c("react-i18next"),fe=await c("i18next-fetch-backend");O.isInitialized||O.use(fe).use(ue).init({fallbackLng:"en",interpolation:{escapeValue:!1},backend:{loadPath:"/iwa-web/assets/locales/{{lng}}/{{ns}}.json",requestOptions:{cache:"no-store"}},react:{useSuspense:!1}});const ge=await c("colorjs.io"),u=e=>{let t=new ge(e).toString({format:"rgb_number",commas:!1});return t=t.replace("rgb(",""),t=t.replace(")",""),t=t.replaceAll(",",""),t},me=e=>({success:"107 188 88",error:"204 39 39",warn:"255 38 64",info:"170 50 190",primaryBackground:u(e["wn-primary-background-color"]),primaryBackgroundFont:u(e["wn-primary-background-contrast-color"]),secondaryBackground:u(e["wn-secondary-background-color"]),secondaryBackgroundFont:u(e["wn-secondary-background-contrast-color"]),tertiaryBackground:u(e["wn-tertiary-background-color"]),tertiaryBackgroundFont:u(e["wn-tertiary-background-contrast-color"]),footerBackground:u(e["wn-footer-background-color"]),footerBackgroundFont:u(e["wn-footer-background-contrast-color"]),primary:u(e["wn-primary-color"]),primaryFont:u(e["wn-primary-contrast-color"]),highlight:u(e["wn-highlight-color"]),highlightFont:u(e["wn-highlight-contrast-color"])}),{Navigate:he,Route:A,RouterProvider:pe,createBrowserRouter:we,createRoutesFromElements:_e}=await c("react-router-dom"),U=await p("assessIapLib","./HostConfigContextProvider");let xe=S(U),{useHostConfigContext:Ie}=U;const $=await p("assessIapLib","./UserPreferenceContextProvider");let Se=S($),{useUserPreferenceContext:je}=$;const{useEffect:Ce,useMemo:be,useState:b}=await c("react"),{AuthProvider:ye}=await c("react-oidc-context"),{WebStorageStateStore:Le}=await c("oidc-client-ts"),Pe=()=>{window.history.replaceState({},document.title,window.location.pathname)},Re=e=>{const[o,t]=b(e.hostConfig),[r,g]=b(e.languageInfo),m={language:o.defaultLanguage??"en",themeName:o.defaultTheme??"light"},i=localStorage.getItem("iapUIUserPreference"),[a,d]=b(i?JSON.parse(i):m);return Ce(()=>{const f=sessionStorage.getItem("iwapAncestorTheme");let w;if(f)try{const{theme:s}=JSON.parse(f);w={color:me(s),name:"Ancestor Theme",daisyUiTheme:s.isDarkMode?"dark":"light"},document.body.style.fontFamily=s.fontFamily}catch(s){console.error("Error parsing ancestor theme",s)}if(o.themes){let s=w||o.themes.find(h=>h.name===a.themeName);s||(s=o.themes[0]);for(const[h,C]of Object.entries(s.color))document.documentElement.style.setProperty(`--color-${h}`,C);document.body.setAttribute("data-theme",s.daisyUiTheme),localStorage.setItem("iapUIUserPreference",JSON.stringify(a)),document.documentElement.lang=a.language}},[a]),n.jsx(xe,{value:{hostConfig:o,setHostConfig:t,languageInfo:r,setLanguageInfo:g},children:n.jsx(Se,{value:{userPreference:a,setUserPreference:d},children:n.jsx(ke,{})})})},ke=()=>{const e=Ie(),o=je(),t=be(()=>we(_e(n.jsxs(n.Fragment,{children:[n.jsx(A,{path:"/",element:n.jsx(he,{to:`/${o.userPreference.language}`})}),n.jsx(A,{index:!0,path:"/:langId/*",element:n.jsx(le,{})})]})),{basename:"/iwa-web"}),[]);return n.jsx(ye,{...e.hostConfig.keycloak,onSigninCallback:Pe,userStore:new Le({store:window.localStorage}),children:n.jsx(pe,{router:t})})},T=await c("axios"),Ee=e=>T.get(`${window.location.origin}/iwa-web/config/${e}/host-config.json`,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}}),ve=()=>T.get(`${window.location.origin}/iwa-web/assets/data/languageInfo.json`,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}}),Oe=async e=>{const o=await Ee(e),t=await ve();return{hostConfig:o.data,languageInfo:t.data}},Ae=await c("react");let D=window.location.hostname;if(window.self!==window.top){const e=window.location.ancestorOrigins&&window.location.ancestorOrigins[window.location.ancestorOrigins.length-1]||document.referrer||window.origin,o=new URL(e);D=o.hostname,window.addEventListener("message",t=>{t.isTrusted&&t.origin===o.origin&&(t.data.requestId==="LOADED"&&t.data.parentContext&&(sessionStorage.setItem("iwapAncestorIdentifier",JSON.stringify({...t?.data?.parentContext?.playerData,parentId:t?.data?.parentContext?.urlQueryParams?.params?.parentId})),sessionStorage.setItem("iwapAncestorLogos",JSON.stringify(t?.data?.parentContext?.logos)),sessionStorage.setItem("iwapAncestorUserIdentifier",t?.data?.parentContext?.user?.userId),sessionStorage.setItem("iwapAncestorTheme",JSON.stringify({theme:t?.data?.parentContext?.v2ThemeConfig})),sessionStorage.setItem("iwapAncestorLocale",t?.data?.parentContext?.locale),sessionStorage.setItem("iwapAncestorORG",t?.data?.parentContext?.org)),t.data.requestId==="LOAD_SCHEDULO_META"&&(t.data.identifier||t.data.eventId)&&sessionStorage.setItem("iwapAncestorIdentifier",JSON.stringify({identifier:t.data.identifier,eventId:t.data.eventId||void 0,userIds:t.data.userIds||void 0,groupId:t.data.groupId||void 0,groupName:t.data.groupName||void 0})))}),window.parent.postMessage({requestId:"LOADED",subApplicationName:"INFOSYS_WINGSPAN_ASSESSMENT"},{targetOrigin:o.origin}),window.parent.postMessage({requestId:"LOAD_SCHEDULO_META",subApplicationName:"INFOSYS_WINGSPAN_ASSESSMENT"},{targetOrigin:o.origin})}Oe(D).then(e=>n.jsx(Re,{hostConfig:e.hostConfig,languageInfo:e.languageInfo})).catch(e=>n.jsx("div",{className:"",children:e.message})).then(e=>{const o=document.getElementById("assessIapShell");o&&y.createRoot(o).render(n.jsx(Ae.StrictMode,{children:e}))});export{S as _,p as a};
